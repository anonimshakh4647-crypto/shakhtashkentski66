<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Shakh | Bass Booster</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;800&display=swap" rel="stylesheet">
    <style>
        :root{ --bg:#020409; --card:#0b1220; --accent:#38bdf8; --glow:0 0 35px rgba(56,189,248,.6); }
        *{box-sizing: border-box;}
        body{ margin:0; background:var(--bg); color:#fff; font-family:Inter, sans-serif; overflow-x:hidden; }
        
        header{ padding:20px 40px; display:flex; justify-content:space-between; align-items:center; background:rgba(11,18,32,0.8); backdrop-filter:blur(10px); position:fixed; top:0; width:100%; z-index:100; }
        .back-link{ color:var(--accent); text-decoration:none; font-weight:bold; letter-spacing:1px; }

        .main-content{ max-width:1300px; margin:110px auto 40px; padding:20px; display:grid; grid-template-columns:450px 1fr; gap:40px; align-items:start; }

        /* Vizualizator qismi */
        .viz-box{ position:sticky; top:120px; text-align:center; background:var(--card); padding:40px; border-radius:30px; box-shadow:var(--glow); border: 1px solid rgba(56, 189, 248, 0.1); }
        .ring{ width:300px; height:300px; border-radius:50%; margin:auto; position:relative; display:flex; align-items:center; justify-content:center; background:conic-gradient(#00eaff, #7c4dff, #ff4edb, #00eaff); animation:rotate 15s linear infinite; }
        .ring::after{ content:""; position:absolute; inset:6px; background:var(--bg); border-radius:50%; }
        .logo{ position:absolute; width:220px; z-index:10; transition:0.1s ease-out; }
        @keyframes rotate{ from {transform:rotate(0)} to {transform:rotate(360deg)} }

        /* BASS BOOSTER CONTROL */
        .bass-control { margin-top: 30px; background: rgba(56, 189, 248, 0.1); padding: 20px; border-radius: 20px; border: 1px solid var(--accent); }
        .bass-control label { display: block; margin-bottom: 10px; font-weight: bold; color: var(--accent); letter-spacing: 1px; }
        .bass-slider { width: 100%; cursor: pointer; accent-color: var(--accent); }
        #bass-value { font-size: 20px; font-weight: 800; display: block; margin-top: 5px; }

        /* Musiqalar ro'yxati */
        .tracks-scroll{ height:75vh; overflow-y:auto; padding-right:15px; }
        .track{ background:var(--card); padding:20px; border-radius:20px; margin-bottom:15px; border:1px solid rgba(255,255,255,0.05); transition:0.3s; }
        .track:hover{ border-color:var(--accent); transform:translateX(8px); }
        .track h4{ margin:0 0 12px 0; color:var(--accent); }
        audio{ width:100%; filter: invert(100%) hue-rotate(180deg) brightness(1.5); height: 35px; }
        
        ::-webkit-scrollbar{ width:6px; }
        ::-webkit-scrollbar-thumb{ background:var(--accent); border-radius:10px; }
        
        @media(max-width:900px){ 
            .main-content{ grid-template-columns:1fr; margin-top: 90px; } 
            .viz-box{ position:relative; top:0; }
        }
    </style>
</head>
<body>

<header>
    <a href="index.html" class="back-link">‚Üê ORQAGA QAYTISH</a>
    <span style="letter-spacing:3px; font-size:11px; color: var(--accent);">SHAKH BASS BOOST</span>
</header>

<div class="main-content">
    <div class="viz-box">
        <div class="ring" id="ring">
            <img src="logo.png" class="logo" id="logo">
        </div>
        <h3 id="track-name" style="margin-top:20px;">Musiqa tanla</h3>

        <div class="bass-control">
            <label>BASS BOOST <span id="bass-value">0 dB</span></label>
            <input type="range" id="bass-slider" class="bass-slider" min="0" max="25" value="0" step="1">
        </div>
    </div>

    <div class="tracks-scroll">
        <div class="track"><h4>Shakh Bass 1</h4><audio controls loop class="audio" data-n="Shakh Bass 1"><source src="music1.mp3"></audio></div>
        <div class="track"><h4>Shakh Bass 2</h4><audio controls loop class="audio" data-n="Shakh Bass 2"><source src="music2.mp3"></audio></div>
        <div class="track"><h4>Shakh Bass 3</h4><audio controls loop class="audio" data-n="Shakh Bass 3"><source src="music3.mp3"></audio></div>
        <div class="track"><h4>Shakh Bass 4</h4><audio controls loop class="audio" data-n="Shakh Bass 4"><source src="music4.mp3"></audio></div>
        <div class="track"><h4>Shakh Bass 5</h4><audio controls loop class="audio" data-n="Shakh Bass 5"><source src="music5.mp3"></audio></div>
        <div class="track"><h4>Shakh Bass 6</h4><audio controls loop class="audio" data-n="Shakh Bass 6"><source src="music6.mp3"></audio></div>
        <div class="track"><h4>Shakh Bass 7</h4><audio controls loop class="audio" data-n="Shakh Bass 7"><source src="music7.mp3"></audio></div>
        <div class="track"><h4>Shakh Bass 8</h4><audio controls loop class="audio" data-n="Shakh Bass 8"><source src="music8.mp3"></audio></div>
        <div class="track"><h4>Shakh Bass 9</h4><audio controls loop class="audio" data-n="Shakh Bass 9"><source src="music9.mp3"></audio></div>
        <div class="track"><h4>Shakh Bass 10</h4><audio controls loop class="audio" data-n="Shakh Bass 10"><source src="music10.mp3"></audio></div>
        <div class="track"><h4>Shakh Bass 11</h4><audio controls loop class="audio" data-n="Shakh Bass 11"><source src="music11.mp3"></audio></div>
        <div class="track"><h4>Shakh Bass 12</h4><audio controls loop class="audio" data-n="Shakh Bass 12"><source src="music12.mp3"></audio></div>
    </div>
</div>

<script>
    const audios = document.querySelectorAll('.audio');
    const logo = document.getElementById('logo');
    const ring = document.getElementById('ring');
    const trackName = document.getElementById('track-name');
    const bassSlider = document.getElementById('bass-slider');
    const bassValueDisplay = document.getElementById('bass-value');

    let audioCtx, analyser, bassFilter, data;
    const sources = new Map();

    audios.forEach(audio => {
        audio.addEventListener('play', () => {
            audios.forEach(a => { if(a !== audio) a.pause(); });
            trackName.innerText = audio.getAttribute('data-n');
            
            if(!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                
                // Bass Filter (Low shelf filter)
                bassFilter = audioCtx.createBiquadFilter();
                bassFilter.type = "lowshelf";
                bassFilter.frequency.value = 200; // Bass chastotasi chegarasi
                bassFilter.gain.value = bassSlider.value;

                analyser = audioCtx.createAnalyser();
                analyser.fftSize = 256;
                data = new Uint8Array(analyser.frequencyBinCount);
                
                animate();
            }

            if (!sources.has(audio)) {
                const source = audioCtx.createMediaElementSource(audio);
                // Zanjir: Audio -> BassFilter -> Analyser -> Dinamiklar
                source.connect(bassFilter);
                bassFilter.connect(analyser);
                analyser.connect(audioCtx.destination);
                sources.set(audio, source);
            }

            if (audioCtx.state === 'suspended') audioCtx.resume();
        });
    });

    // Bass darajasini o'zgartirish
    bassSlider.addEventListener('input', (e) => {
        const val = e.target.value;
        bassValueDisplay.innerText = val + " dB";
        if (bassFilter) {
            bassFilter.gain.value = val;
        }
    });

    function animate() {
        requestAnimationFrame(animate);
        if(!analyser) return;
        analyser.getByteFrequencyData(data);
        let bass = data[2];
        logo.style.transform = `scale(${1 + (bass/550)})`;
        ring.style.boxShadow = `0 0 ${bass/1.5}px rgba(56,189,248,0.8)`;
    }
</script>
</body>
</html>